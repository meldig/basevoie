/*
La table TA_FANTOIR regroupe tous les tronçons de la base voie.
*/

-- 1. Création de la table TA_FANTOIR
CREATE TABLE G_BASE_VOIE.TA_FANTOIR(
    objectid NUMBER(38,0) GENERATED BY DEFAULT AS IDENTITY,
    code_fantoir CHAR(7)
);

-- 2. Création des commentaires sur la table et les champs
COMMENT ON TABLE G_BASE_VOIE.TA_FANTOIR IS 'Table rassemblant tous les codes fantoirs issus du fichier fantoir et correspondants aux voies présentes sur le territoire de la MEL.';
COMMENT ON COLUMN G_BASE_VOIE.TA_FANTOIR.objectid IS 'Clé primaire auto-incrémentée de la table identifiant.';
COMMENT ON COLUMN G_BASE_VOIE.TA_FANTOIR.code_fantoir IS 'Code fantoir de chaque voie. Ce code est composé du code commune sur 3 caractère et de l''identifiant de la voie dans la commune. Attention cet identifiant est recyclé dans le fichier fantoir, ce champ ne doit donc jamais être utilisé en tant que clé primaire ou étrangère. Exemple : 3502153 pour une voie située dans Lille ; 0096870 pour une voie située dans Villeneuve-d''Ascq.';

-- 3. Création de la clé primaire
ALTER TABLE G_BASE_VOIE.TA_FANTOIR 
ADD CONSTRAINT TA_FANTOIR_PK 
PRIMARY KEY("OBJECTID") 
USING INDEX TABLESPACE "G_ADT_INDX";

-- 7. Création des index
CREATE INDEX TA_FANTOIR_CODE_FANTOIR_IDX ON G_BASE_VOIE.TA_FANTOIR(code_fantoir)
    TABLESPACE G_ADT_INDX;

-- 8. Affectation du droit de sélection sur les objets de la table aux administrateurs
GRANT SELECT ON G_BASE_VOIE.TA_FANTOIR TO G_ADMIN_SIG;
